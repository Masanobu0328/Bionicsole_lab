# MasaCAD TODOリスト

**最終更新**: 2026-02-08
**バージョン**: v4.4-dev

---

## 進捗サマリー（現行コード基準）

| カテゴリ | 項目数 | 完了 | 達成率 |
|----------|--------|------|--------|
| **全体** | 27 | 15 | **56%** |
| **MVP（コア機能）** | 10 | 9 | **90%** |
| **ラティス機能** | 7 | 3 | **43%** |
| **UI/UX拡張** | 5 | 3 | **60%** |
| **将来機能** | 5 | 0 | **0%** |

---

## 実装済み（15項目）

- [x] CSV輪郭読み込み（スケーリング対応）
- [x] ベースメッシュ生成（Delaunay三角分割）
- [x] ヒールカップ（コサイン減衰で滑らか化）
- [x] 内側縦アーチ（S字カーブ補間）
- [x] 外側縦アーチ（S字カーブ補間）
- [x] 横アーチ（v4.3で実装）
- [x] STL/GLB出力（3Dプリント対応）
- [x] 3Dプレビュー（Plotly + Three.js）
- [x] メッシュ検証・自動修復（Watertightチェック）
- [x] 3Dラティス生成（現行は Kelvin ベース）
- [x] ラティス適用（API経由で実行）
- [x] シェル生成処理（`generate_hollow_shell` 呼び出し）
- [x] 解剖学的ランドマーク定義（`landmarks.py`）
- [x] 断面スライダ表示（X軸方向の断面可視化）
- [x] 高さマップカラー表示（3Dビューア）

---

## 開発中・未完了（ラティス含む）

- [ ] **ラティスの本番経路を統一**
  - 現状: `core/xcell_3d.py` が `core.geometry_v4` の `generate_hollow_shell()` を参照
  - 目標: 本番系 `core/geometry_v4_frontend.py` 基準に統一

- [ ] **パラメータプリセット保存**
  - 設定の保存/読込UI未実装

- [ ] **段階的ラティス密度**
  - 部位別の密度調整機能なし

---

## 計画中

### 高優先度
- [ ] **AI推論API統合**（足型データからパラメータ自動推定）

### 中優先度
- [ ] **3Dプリント最適化**（サポート生成、スライサー連携）
- [ ] **骨ごとの高さスライダー**（詳細版アーチ設定）
- [ ] **足サイズ自動位置調整**（サイズに応じたランドマーク位置補正）

### 低優先度
- [ ] **他ラティスパターン**（gyroid/honeycomb）
- [ ] **バッチ処理機能**（複数患者の一括処理）
- [ ] **クラウドデプロイ**（Streamlit Cloud対応）
- [ ] **3D骨位置可視化**（プレビューで骨位置を表示）
- [ ] **二重壁シェルの本番検証**（優先度低）
  - コード上はシェル処理あり
  - slicer実機検証（Solid infill/空洞状態）は後回し
- [ ] **ブーリアン演算の運用安定化**（優先度低）
  - `manifold` 利用は実装済み
  - 失敗時フォールバックやエラー時挙動の運用整理を後回し

---

## 既知の問題

| 問題 | 影響 | 対応状況 |
|------|------|----------|
| メッシュ品質 | 複雑形状で非多様体エッジ発生 | 部分対策あり |
| パフォーマンス | 面数増加時に重い | 可視化側で間引き |
| アーチ統合 | 複数ランドマークで調整が難しい | 補間で緩和 |
| スケーリング | 入力CSVの単位依存 | 設定で補正 |
| ブーリアン演算 | エンジン依存で失敗ケースあり | 追加安定化が必要 |

---

## 次のマイルストーン

### v4.4（次期）
1. ラティス経路の本番統一（`geometry_v4_frontend.py`基準）
2. パラメータプリセット保存
3. 段階的ラティス密度の仕様確定

### v5.0（将来）
1. AI推論API統合
2. 詳細版アーチ設定（骨ごとのパラメータ）
3. 二重壁シェル本番検証とブーリアン運用安定化

---

## 関連ドキュメント

- [README.md](README.md) - プロジェクト概要
- [ARCH_DESIGN_SPEC.md](ARCH_DESIGN_SPEC.md) - アーチ設計仕様
- [APP_FLOW_SPEC.md](APP_FLOW_SPEC.md) - 画面フロー
- [FRONTEND_DESIGN_SPEC.md](FRONTEND_DESIGN_SPEC.md) - フロントエンド設計
- [README_XCELL.md](README_XCELL.md) - ラティス構造ドキュメント
- [GLOSSARY.md](GLOSSARY.md) - 用語集

---

**MasaCAD** - Next-Gen Insole CAD System
