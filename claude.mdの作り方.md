`CLAUDE.md`は、Claude Code（AIエージェント）がセッションを開始するたびに最初に読み込む「プロジェクトの説明書」であり、AIの振る舞いや成果物の品質を左右する最も重要な設定ファイルの一つです。

提供されたソースに基づき、効率を最大化するための「CLAUDE.mdの完璧な書き方・使い方」をまとめました。

1. 基本思想：シンプルさと具体性

`CLAUDE.md`を書く際の鉄則は、**「AIに与える情報は必要最小限かつ具体的であるべき」**という点です。

• **コンテキストの節約**: LLM（大規模言語モデル）が一貫性を持って従える指示数は限られています（150〜200程度）。Claude Codeのシステム自体ですでに一部を消費しているため、`CLAUDE.md`に情報を詰め込みすぎると精度が落ちたり、指示に従わなくなったりします。

• **ノイズの排除**: 無関係な情報が大量にあると、AIは混乱します。例えば、バックエンドの実装中にフロントエンドのデザインルールは不要です。「タスクに関係ない要素は無視してください」といった指示を含めることも有効です。

• **行数の目安**: ファイルの長さは **300行以内** が最適とされており、少なければ少ないほど良いとされています。

2. 書くべき内容（構成要素）

AIが「何を」「なぜ」「どのように」行うべきかを明確にする情報を記述します。

• **プロジェクトの基本情報**: プロジェクトの目的、構成、実行方法（ビルドコマンドやテスト方法）などの汎用的な情報。

• **具体的かつ限定的な指示**:

    ◦ 「何（What）」「なぜ（Why）」「どうやって（How）」を明確にする。

    ◦ 主語・述語をはっきりさせ、固有名詞（特定のフレームワーク名など）を使って解釈の幅を狭めることで、AIの迷いを減らします。

• **思考プロセスの制御**: 例えば学習目的や、勝手な実装を防ぎたい場合、「コードを書く前に、どのファイルをなぜ変更するのか説明してください」といった指示を入れることで、意図しない破壊的な変更を防ぎ、ユーザーの理解を助けることができます。

3. 効果的な運用テクニック

ドキュメントの外部参照（`docs/`ディレクトリの活用）

`CLAUDE.md`にすべてを書くのではなく、詳細な情報は別ファイルに切り出す手法が推奨されています。

• **docs/****ディレクトリの作成**: API仕様書、デザインガイドライン、データベース設計などを個別のファイルとして`docs`フォルダに格納します。

• **パスの参照**: `CLAUDE.md`には、「デザインについては `docs/design.md` を参照」「APIについては `docs/api.md` を参照」といった**ファイルパスのみ**を記述します。これにより、AIは必要な時だけその情報を読みに行くようになり、コンテキストを汚さずに済みます。

してはいけないこと（アンチパターン）

• **リンター（Lint）ルールの記述**: コードスタイルやフォーマットのルール（スペースの数やカンマの位置など）を`CLAUDE.md`に書くのは推奨されません。これらは既存のリンターツールに任せるべきであり、高価なAIの推論能力を浪費させるべきではないからです。

• **自動生成への過信**: `/init` コマンドで `CLAUDE.md` のひな形を自動生成できますが、これには無駄な情報が含まれることがあります。生成後は必ず人間が確認し、不要な情報を削ぎ落とすことが重要です。

4. 品質の高い `CLAUDE.md` を作るための近道

一から自分で考えるのが難しい場合は、**お手本をコピーする**のが最も確実です。

• **公式SDKの参照**: Anthropic社が提供しているMCP（Model Context Protocol）のSDK（特にPython版など）には、一流のエンジニアが記述した`CLAUDE.md`が含まれています。これをコピーして自分のプロジェクトに合わせて調整することで、高品質な指示セットを利用できます。

まとめ：完璧な `CLAUDE.md` の構成案

ソースから導き出される理想的な構成は以下の通りです。

1. **プロジェクト概要**: 何を作るプロジェクトか。

2. **アーキテクチャ・技術スタック**: 言語、フレームワーク、主要ライブラリ。

3. **重要なコマンド**: 起動、テスト、デプロイ方法。

4. **ドキュメント参照**: 詳細な仕様は `docs/` 以下のファイルパスを案内。

5. **振る舞いのルール**: 「関係ない情報は無視せよ」「実装前に計画を説明せよ」などのメタ指示。

6. **禁止事項**: やってはいけないこと（ただしリンターで防げるものは書かない）。

このように、情報を整理・階層化し、AIにとって「ノイズが少なく、かつ必要な情報への地図が示されている」状態を作ることが、`CLAUDE.md`の完璧な使い方と言えます。